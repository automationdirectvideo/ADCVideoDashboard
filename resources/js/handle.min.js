function displayChannelDemographics(e){const t=e.result.rows;let o=0,r=0,n=0,i=0;for(var a=0;a<t.length;a++){const e=parseFloat(t[a][2]);"female"==t[a][1]?(r+=e,e>i&&(i=e)):(o+=e,e>n&&(n=e))}for(a=0;a<t.length;a++){const e=t[a][0].substr(3),o=t[a][2];let r=document.getElementById(t[a][1]+"-"+e);r.innerHTML=`<span>${o}</span>%`,"female"==t[a][1]?r.style.opacity=(parseFloat(o)/i+1.5)/2.5:r.style.opacity=(parseFloat(o)/n+1.5)/2.5}if(o=Math.round(10*o)/10,r=Math.round(10*r)/10,o+r!=100){const e=100-(o+r);r+=e,r=Math.round(10*r)/10}document.getElementById("male-title").innerHTML=`\n    <i class="fas fa-male" style="font-size:3rem"></i>\n    <br>\n    <span style="font-size:2rem">${o}</span>\n    %\n  `,document.getElementById("female-title").innerHTML=`\n    <i class="fas fa-female" style="font-size:3rem"></i>\n    <br>\n    <span style="font-size:2rem">${r}</span>\n    %\n  `;const l="demographics-graph",s=.0875,c=.05,d=s*document.documentElement.clientHeight,m=c*document.documentElement.clientWidth,h=[o,r],u=["Male","Female"],p=[{values:h,labels:u,textinfo:"none",hoverinfo:"none",marker:{colors:["rgb(84, 157, 209)","rgb(146, 111, 209)"]},type:"pie"}];let g={height:d,weight:m,showlegend:!1,margin:{l:0,r:0,t:0,b:0,pad:4}};const y={staticPlot:!0};if(gapi.auth2.getAuthInstance().isSignedIn.get()){const e=getCurrentDashboardTheme("platform");"dark"==e&&(g.plot_bgcolor="#222",g.paper_bgcolor="#222")}var f=document.getElementById(l);f.style.height=m+"px",f.style.width=m+"px";try{Plotly.newPlot(l,p,g,y),recordGraphData(l,p,g,y,s,c),recordGraphSize(l,s,c)}catch(e){return recordError(e,"Unable to display channel demographics graph"),Promise.resolve("Error Displaying Channel Demographics")}if(gapi.auth2.getAuthInstance().isSignedIn.get()){const e={values:[[JSON.stringify(t)]]};return updateSheetData("Stats","Channel Demographics",e).then(e=>"Displayed Channel Demographics")}return Promise.resolve("Displayed Channel Demographics")}function displayChannelSearchTerms(e){const t=e.result.rows;let o=[],r=[];const n=Math.min(9,t.length+-1);for(var i=n;i>=0;i--)o.push(t[i][1]),r.push(t[i][0]);var a=o.map(String);for(i=0;i<a.length;i++)a[i]=numberWithCommas(a[i]);const l="channel-search-terms",s=.2287,c=.4681,d=s*document.documentElement.clientHeight,m=c*document.documentElement.clientWidth,h=Math.floor(.0125*document.documentElement.clientWidth);let u={showline:!0,showticklabels:!0,tickmode:"linear",automargin:!0},p={yaxis:u};const g=[{x:o,y:r,type:"bar",orientation:"h",text:a,textposition:"auto",marker:{color:"rgb(255,0,0)"}}];let y={height:d,width:m,font:{size:h},margin:{b:10,r:0,t:10},xaxis:{visible:!1,automargin:!0},yaxis:u};const f={staticPlot:!0,responsive:!0},b=getCurrentDashboardTheme("platform");"dark"==b&&(y.plot_bgcolor="#222",y.paper_bgcolor="#222",y.font.color="#fff",u.linecolor="#fff",y.yaxis=u,p={yaxis:u});try{Plotly.newPlot(l,g,y,f),recordGraphData(l,g,y,f,s,c,p),recordGraphSize(l,s,c,p)}catch(e){return displayGraphError(l,e),Promise.resolve("Error Displaying Channel Search Terms")}return Promise.resolve("Displayed Channel Search Terms")}function displayWatchTimeBySubscribedStatus(e){const t=e.result.rows,o={UNSUBSCRIBED:"Not Subscribed",SUBSCRIBED:"Subscribed"};for(var r=0,n=[],i=[],a=0;a<t.length;a++)r+=t[a][1],n.push(t[a][1]),i.push(o[t[a][0]]);var l=[];for(a=0;a<n.length;a++)l[a]=decimalToPercent(n[a]/r)+"%";n[0]>n[1]&&(n.reverse(),i.reverse(),l.reverse());const s="channel-watch-time",c=.1039,d=.4681,m=c*document.documentElement.clientHeight,h=d*document.documentElement.clientWidth,u=Math.floor(.0125*document.documentElement.clientWidth);let p={showline:!0,showticklabels:!0,tickmode:"linear",automargin:!0},g={yaxis:p};const y=[{x:n,y:i,type:"bar",orientation:"h",text:l,textposition:"auto",marker:{color:"rgb(255,0,0)"}}];let f={height:m,width:h,font:{size:u},margin:{r:0,t:10,b:10},xaxis:{visible:!1,automargin:!0},yaxis:p};const b={staticPlot:!0,responsive:!0},E=getCurrentDashboardTheme("platform");"dark"==E&&(f.plot_bgcolor="#222",f.paper_bgcolor="#222",f.font.color="#fff",p.linecolor="#fff",f.yaxis=p,g={yaxis:p});try{Plotly.newPlot(s,y,f,b),recordGraphData(s,y,f,b,c,d,g),recordGraphSize(s,c,d,g)}catch(e){return displayGraphError(s,e),Promise.resolve("Error Displaying Watch Time By Subscribed Status")}return Promise.resolve("Displayed Watch Time By Subscribed Status")}function displayViewsByDeviceType(e){var t=e.result.rows;const o=t[1];t[1]=t[3],t[3]=o;const r={DESKTOP:"Desktop",MOBILE:"Mobile",TABLET:"Tablet",TV:"TV",GAME_CONSOLE:"Game<br>Console"};for(var n=[],i=[],a=0;a<t.length;a++)n.push(t[a][1]),i.push(r[t[a][0]]);const l="channel-views-by-device",s=.3742,c=.3065,d=s*document.documentElement.clientHeight,m=c*document.documentElement.clientWidth,h=Math.floor(.0125*document.documentElement.clientWidth),u=[{values:n,labels:i,type:"pie",sort:!1,textinfo:"label+percent",textposition:["inside","outside","outside","inside","outside"],rotation:-120,direction:"clockwise"}];let p={height:d,width:m,font:{size:h},automargin:!0,autosize:!0,showlegend:!1,margin:{l:0,r:0,t:0,b:20,pad:4}};const g={staticPlot:!0,responsive:!0},y=getCurrentDashboardTheme("platform");"dark"==y&&(p.plot_bgcolor="#222",p.paper_bgcolor="#222",p.font.color="#fff");try{Plotly.newPlot(l,u,p,g),recordGraphData(l,u,p,g,s,c),recordGraphSize(l,s,c)}catch(e){return displayGraphError(l,e),Promise.resolve("Error Displaying Views By Device Type")}return Promise.resolve("Displayed Views By Device Type")}function displayViewsByState(e){const t=e.result.rows;for(var o=[],r=[],n=[],i=0;i<t.length;i++)o.push(t[i][0].substr(3)),r.push(t[i][1]),n.push(numberWithCommas(t[i][1])+" views");const a="channel-views-by-state",l=.3742,s=.4681,c=l*document.documentElement.clientHeight,d=s*document.documentElement.clientWidth,m=Math.floor(.0093*document.documentElement.clientWidth);let h=[{type:"choropleth",locationmode:"USA-states",locations:o,z:r,text:n,hovertemplate:"%{location}<br>%{text}",name:"Views By State",autocolorscale:!0,colorbar:{tickfont:{size:m}}}],u={height:c,width:d,geo:{scope:"usa",countrycolor:"rgb(255, 255, 255)",showland:!0,landcolor:"rgb(217, 217, 217)",showlakes:!0,lakecolor:"rgb(255, 255, 255)",subunitcolor:"rgb(255, 255, 255)"},margin:{l:0,r:0,t:0,b:10,pad:4}};const p={scrollZoom:!1,displayModeBar:!1,responsive:!0},g=getCurrentDashboardTheme("platform");"dark"==g&&(u.plot_bgcolor="#222",u.paper_bgcolor="#222",h[0].colorbar={tickfont:{color:"#fff"}},u.geo.bgcolor="#222",u.geo.showlakes=!1);try{Plotly.newPlot(a,h,u,p),recordGraphData(a,h,u,p,l,s),recordGraphSize(a,l,s)}catch(e){return displayGraphError(a,e),Promise.resolve("Error Displaying Views By State")}return Promise.resolve("Displayed Views By State")}function displayViewsByTrafficSource(e){const t=e.result.rows;var o=0,r=0,n=0,i=0,a=0;const l=["ADVERTISING","PROMOTED"],s=["EXT_URL","NO_LINK_EMBEDDED","NO_LINK_OTHER"],c=["YT_SEARCH"],d=["RELATED_VIDEO"];for(var m=0;m<t.length;m++)l.includes(t[m][0])?o+=t[m][1]:s.includes(t[m][0])?r+=t[m][1]:c.includes(t[m][0])?n+=t[m][1]:d.includes(t[m][0])?i+=t[m][1]:a+=t[m][1];const h=[o,r,n,i,a],u=["Advertising","External","YouTube<br>Search","Related<br>Video","Other"],p="channel-traffic-sources",g=.3742,y=.3065,f=g*document.documentElement.clientHeight,b=y*document.documentElement.clientWidth,E=Math.floor(.0125*document.documentElement.clientWidth),w=[{values:h,labels:u,type:"pie",textinfo:"label+percent",textposition:"inside",rotation:90}];let v={height:f,width:b,font:{size:E},automargin:!0,autosize:!0,showlegend:!1,margin:{l:0,r:0,t:0,b:10,pad:4}};const x={staticPlot:!0,responsive:!0},D=getCurrentDashboardTheme("platform");"dark"==D&&(v.plot_bgcolor="#222",v.paper_bgcolor="#222",v.font.color="#fff");try{Plotly.newPlot(p,w,v,x),recordGraphData(p,w,v,x,g,y),recordGraphSize(p,g,y)}catch(e){return displayGraphError(p,e),Promise.resolve("Error Displaying Views By Traffic Source")}return Promise.resolve("Displayed Views By Traffic Source")}function displayVideoBasicStats(e,t,o){const r=e.result.rows;for(let e=0;e<r.length;e++){const n=r[e],i=n[0],a=t[i];let l=document.getElementById(a+"-views");l.innerHTML=numberWithCommas(n[1]);let s=document.getElementById(a+"-subs-net");s.innerHTML=numberWithCommas(n[7]-n[8]);let c=document.getElementById(a+"-like-ratio"),d=document.getElementById(a+"-likes"),m=document.getElementById(a+"-like-bar");const h=decimalToPercent(n[3]/(n[3]+n[4]));c.innerHTML=h+"%",d.innerHTML=numberWithCommas(n[3])+" Likes",m.style.width=h+"%",m.setAttribute("aria-valuenow",h);let u=document.getElementById(a+"-dislikes");u.innerHTML=n[4]+" Dislikes";let p=document.getElementById(a+"-comments");p.innerHTML=numberWithCommas(n[2]);let g=document.getElementById(a+"-avg-view-duration");const y=n[6];g.innerHTML=secondsToDuration(y);const f=document.getElementById(a+"-duration-seconds").innerHTML,b=decimalToPercent(y/f);let E=document.getElementById(a+"-avg-view-percentage");E.innerHTML=" ("+b+"%)";let w=document.getElementById(a+"-minutes-watched");w.innerHTML=numberWithCommas(n[5]),null!=o&&(o[i].views=n[1],o[i].subscribersGained=n[7]-n[8],o[i].avgViewDuration=n[6],o[i].minutesWatched=n[5],o[i].comments=n[2],o[i].likes=n[3],o[i].dislikes=n[4])}return null==o?null:o}function displayVideoDailyViews(e,t){if(e){let f=e.result.rows;for(var o=[],r=[],n=0;n<f.length;n++)o.push(f[n][0]),r.push(f[n][1]);var i=t+"-views-graph",a=.228,l=.4681,s=a*document.documentElement.clientHeight,c=l*document.documentElement.clientWidth,d=Math.floor(.0104*document.documentElement.clientWidth),m={automargin:!0,fixedrange:!0,tickangle:-60,tickformat:"%-m/%d",type:"date"},h={automargin:!0,fixedrange:!0,showline:!0,showticklabels:!0,title:"Views"},u={xaxis:m,yaxis:h},p=[{x:o,y:r,fill:"tozeroy",type:"scatter",marker:{color:"rgb(255,0,0)"}}],g={height:s,width:c,font:{size:d},margin:{b:0,t:0},xaxis:m,yaxis:h},y={displayModeBar:!1,responsive:!0};const b=getCurrentDashboardTheme(t);"dark"==b&&(g.plot_bgcolor="#222",g.paper_bgcolor="#222",g.font.color="#fff",m.linecolor="#fff",h.linecolor="#fff",g.xaxis=m,g.yaxis=h,u={xaxis:m,yaxis:h});try{Plotly.newPlot(i,p,g,y),recordGraphData(i,p,g,y,a,l,u),recordGraphSize(i,a,l,u)}catch(e){throw displayGraphError(i),e}}}function displayVideoSearchTerms(e,t){if(e){let g=e.result.rows,y=[],f=[],b=Math.min(4,g.length-1);for(var o=b;o>=0;o--)y.push(g[o][1]),f.push(g[o][0]);var r=y.map(String);for(o=0;o<r.length;o++)r[o]=numberWithCommas(r[o]);var n=t+"-search-terms",i=.228,a=.4681,l=i*document.documentElement.clientHeight,s=a*document.documentElement.clientWidth,c=Math.floor(.0125*document.documentElement.clientWidth),d={showline:!0,showticklabels:!0,tickmode:"linear",automargin:!0},m={yaxis:d},h=[{x:y,y:f,type:"bar",orientation:"h",text:r,textangle:0,textposition:"auto",marker:{color:"rgb(255,0,0)"}}],u={height:l,width:s,font:{size:c},autosize:!1,margin:{b:0,r:0,t:0},xaxis:{visible:!1},yaxis:d},p={staticPlot:!0,responsive:!0};const E=getCurrentDashboardTheme(t);"dark"==E&&(u.plot_bgcolor="#222",u.paper_bgcolor="#222",u.font.color="#fff",d.linecolor="#fff",u.yaxis=d,m={yaxis:d});try{Plotly.newPlot(n,h,u,p),recordGraphData(n,h,u,p,i,a,m),recordGraphSize(n,i,a,m)}catch(e){throw displayGraphError(n),e}}}function parseCardPerformance(e,t){if(e){let o=[t,0,0,0,0];try{let r=e.result.rows[0],n=parseInt(r[0]),i=parseFloat(r[1]).toFixed(4),a=parseInt(r[2]),l=parseFloat(r[3]).toFixed(4);o[1]=n,o[2]=i,o[3]=a,o[4]=l}catch(e){const o=`No card data exists for month: "${t}" - `;console.log(o),recordError(e,o)}finally{return o}}}