function displayChannelDemographics(e){const t=e.result.rows;let o=0,n=0,r=0,a=0;for(var s=0;s<t.length;s++){const e=parseFloat(t[s][2]);"female"==t[s][1]?(n+=e,e>a&&(a=e)):(o+=e,e>r&&(r=e))}for(s=0;s<t.length;s++){const e=t[s][0].substr(3),o=t[s][2];let n=document.getElementById(t[s][1]+"-"+e);n.innerHTML=`<span>${o}</span>%`,"female"==t[s][1]?n.style.opacity=(parseFloat(o)/a+1.5)/2.5:n.style.opacity=(parseFloat(o)/r+1.5)/2.5}if(o=Math.round(10*o)/10,n=Math.round(10*n)/10,o+n!=100){const e=100-(o+n);n+=e,n=Math.round(10*n)/10}document.getElementById("male-title").innerHTML=`\n    <i class="fas fa-male" style="font-size:3rem"></i>\n    <br>\n    <span style="font-size:2rem">${o}</span>\n    %\n  `,document.getElementById("female-title").innerHTML=`\n    <i class="fas fa-female" style="font-size:3rem"></i>\n    <br>\n    <span style="font-size:2rem">${n}</span>\n    %\n  `;const i="demographics-graph",l=.0875,c=.05,d=l*document.documentElement.clientHeight,m=c*document.documentElement.clientWidth,h=[o,n],u=["Male","Female"],g=[{values:h,labels:u,textinfo:"none",hoverinfo:"none",marker:{colors:["rgb(84, 157, 209)","rgb(146, 111, 209)"]},type:"pie"}];let p={height:d,weight:m,showlegend:!1,margin:{l:0,r:0,t:0,b:0,pad:4}};const f={staticPlot:!0};if(gapi.auth2.getAuthInstance().isSignedIn.get()){for(var b=JSON.parse(localStorage.getItem("settings")),y="",v=0;v<b.dashboards.length&&""==y;)"platform"==b.dashboards[v].name&&(y=b.dashboards[v].theme),v++;"dark"==y&&(p.plot_bgcolor="#222",p.paper_bgcolor="#222")}var w=document.getElementById(i);if(w.style.height=m+"px",w.style.width=m+"px",Plotly.newPlot(i,g,p,f),recordGraphData(i,g,p,f,l,c),recordGraphSize(i,l,c),gapi.auth2.getAuthInstance().isSignedIn.get()){const e={values:[[JSON.stringify(t)]]};return updateSheetData("Stats","Channel Demographics",e).then(e=>"Displayed Channel Demographics")}return Promise.resolve("Displayed Channel Demographics")}function displayChannelSearchTerms(e){const t=e.result.rows;let o=[],n=[];const r=Math.min(9,t.length+-1);for(var a=r;a>=0;a--)o.push(t[a][1]),n.push(t[a][0]);var s=o.map(String);for(a=0;a<s.length;a++)s[a]=numberWithCommas(s[a]);const i="channel-search-terms",l=.2287,c=.4681,d=l*document.documentElement.clientHeight,m=c*document.documentElement.clientWidth,h=Math.floor(.0125*document.documentElement.clientWidth);let u={showline:!0,showticklabels:!0,tickmode:"linear",automargin:!0},g={yaxis:u};const p=[{x:o,y:n,type:"bar",orientation:"h",text:s,textposition:"auto",marker:{color:"rgb(255,0,0)"}}];let f={height:d,width:m,font:{size:h},margin:{b:10,r:0,t:10},xaxis:{visible:!1,automargin:!0},yaxis:u};const b={staticPlot:!0,responsive:!0};for(var y=JSON.parse(localStorage.getItem("settings")),v="",w=0;w<y.dashboards.length&&""==v;)"platform"==y.dashboards[w].name&&(v=y.dashboards[w].theme),w++;return"dark"==v&&(f.plot_bgcolor="#222",f.paper_bgcolor="#222",f.font.color="#fff",u.linecolor="#fff",f.yaxis=u,g={yaxis:u}),Plotly.newPlot(i,p,f,b),recordGraphData(i,p,f,b,l,c,g),recordGraphSize(i,l,c,g),Promise.resolve("Displayed Channel Search Terms")}function displayWatchTimeBySubscribedStatus(e){const t=e.result.rows,o={UNSUBSCRIBED:"Not Subscribed",SUBSCRIBED:"Subscribed"};for(var n=0,r=[],a=[],s=0;s<t.length;s++)n+=t[s][1],r.push(t[s][1]),a.push(o[t[s][0]]);var i=[];for(s=0;s<r.length;s++)i[s]=decimalToPercent(r[s]/n)+"%";r[0]>r[1]&&(r.reverse(),a.reverse(),i.reverse());const l="channel-watch-time",c=.1039,d=.4681,m=c*document.documentElement.clientHeight,h=d*document.documentElement.clientWidth,u=Math.floor(.0125*document.documentElement.clientWidth);let g={showline:!0,showticklabels:!0,tickmode:"linear",automargin:!0},p={yaxis:g};const f=[{x:r,y:a,type:"bar",orientation:"h",text:i,textposition:"auto",marker:{color:"rgb(255,0,0)"}}];let b={height:m,width:h,font:{size:u},margin:{r:0,t:10,b:10},xaxis:{visible:!1,automargin:!0},yaxis:g};const y={staticPlot:!0,responsive:!0};for(var v=JSON.parse(localStorage.getItem("settings")),w="",E=0;E<v.dashboards.length&&""==w;)"platform"==v.dashboards[E].name&&(w=v.dashboards[E].theme),E++;return"dark"==w&&(b.plot_bgcolor="#222",b.paper_bgcolor="#222",b.font.color="#fff",g.linecolor="#fff",b.yaxis=g,p={yaxis:g}),Plotly.newPlot(l,f,b,y),recordGraphData(l,f,b,y,c,d,p),recordGraphSize(l,c,d,p),Promise.resolve("Displayed Watch Time By Subscribed Status")}function displayViewsByDeviceType(e){var t=e.result.rows;const o=t[1];t[1]=t[3],t[3]=o;const n={DESKTOP:"Desktop",MOBILE:"Mobile",TABLET:"Tablet",TV:"TV",GAME_CONSOLE:"Game<br>Console"};for(var r=[],a=[],s=0;s<t.length;s++)r.push(t[s][1]),a.push(n[t[s][0]]);const i="channel-views-by-device",l=.3742,c=.3065,d=l*document.documentElement.clientHeight,m=c*document.documentElement.clientWidth,h=Math.floor(.0125*document.documentElement.clientWidth),u=[{values:r,labels:a,type:"pie",sort:!1,textinfo:"label+percent",textposition:["inside","outside","outside","inside","outside"],rotation:-120,direction:"clockwise"}];let g={height:d,width:m,font:{size:h},automargin:!0,autosize:!0,showlegend:!1,margin:{l:0,r:0,t:0,b:20,pad:4}};const p={staticPlot:!0,responsive:!0};for(var f=JSON.parse(localStorage.getItem("settings")),b="",y=0;y<f.dashboards.length&&""==b;)"platform"==f.dashboards[y].name&&(b=f.dashboards[y].theme),y++;return"dark"==b&&(g.plot_bgcolor="#222",g.paper_bgcolor="#222",g.font.color="#fff"),Plotly.newPlot(i,u,g,p),recordGraphData(i,u,g,p,l,c),recordGraphSize(i,l,c),Promise.resolve("Displayed Views By Device Type")}function displayViewsByState(e){const t=e.result.rows;for(var o=[],n=[],r=[],a=0;a<t.length;a++)o.push(t[a][0].substr(3)),n.push(t[a][1]),r.push(numberWithCommas(t[a][1])+" views");const s="channel-views-by-state",i=.3742,l=.4681,c=i*document.documentElement.clientHeight,d=l*document.documentElement.clientWidth,m=Math.floor(.0093*document.documentElement.clientWidth);let h=[{type:"choropleth",locationmode:"USA-states",locations:o,z:n,text:r,hovertemplate:"%{location}<br>%{text}",name:"Views By State",autocolorscale:!0,colorbar:{tickfont:{size:m}}}],u={height:c,width:d,geo:{scope:"usa",countrycolor:"rgb(255, 255, 255)",showland:!0,landcolor:"rgb(217, 217, 217)",showlakes:!0,lakecolor:"rgb(255, 255, 255)",subunitcolor:"rgb(255, 255, 255)"},margin:{l:0,r:0,t:0,b:10,pad:4}};const g={scrollZoom:!1,displayModeBar:!1,responsive:!0};for(var p=JSON.parse(localStorage.getItem("settings")),f="",b=0;b<p.dashboards.length&&""==f;)"platform"==p.dashboards[b].name&&(f=p.dashboards[b].theme),b++;return"dark"==f&&(u.plot_bgcolor="#222",u.paper_bgcolor="#222",h[0].colorbar={tickfont:{color:"#fff"}},u.geo.bgcolor="#222",u.geo.showlakes=!1),Plotly.plot(s,h,u,g),recordGraphData(s,h,u,g,i,l),recordGraphSize(s,i,l),Promise.resolve("Displayed Views By State")}function displayViewsByTrafficSource(e){const t=e.result.rows;var o=0,n=0,r=0,a=0,s=0;const i=["ADVERTISING","PROMOTED"],l=["EXT_URL","NO_LINK_EMBEDDED","NO_LINK_OTHER"],c=["YT_SEARCH"],d=["RELATED_VIDEO"];for(var m=0;m<t.length;m++)i.includes(t[m][0])?o+=t[m][1]:l.includes(t[m][0])?n+=t[m][1]:c.includes(t[m][0])?r+=t[m][1]:d.includes(t[m][0])?a+=t[m][1]:s+=t[m][1];const h=[o,n,r,a,s],u=["Advertising","External","YouTube<br>Search","Related<br>Video","Other"],g="channel-traffic-sources",p=.3742,f=.3065,b=p*document.documentElement.clientHeight,y=f*document.documentElement.clientWidth,v=Math.floor(.0125*document.documentElement.clientWidth),w=[{values:h,labels:u,type:"pie",textinfo:"label+percent",textposition:"inside",rotation:90}];let E={height:b,width:y,font:{size:v},automargin:!0,autosize:!0,showlegend:!1,margin:{l:0,r:0,t:0,b:10,pad:4}};const x={staticPlot:!0,responsive:!0};for(var S=JSON.parse(localStorage.getItem("settings")),T="",k=0;k<S.dashboards.length&&""==T;)"platform"==S.dashboards[k].name&&(T=S.dashboards[k].theme),k++;return"dark"==T&&(E.plot_bgcolor="#222",E.paper_bgcolor="#222",E.font.color="#fff"),Plotly.newPlot(g,w,E,x),recordGraphData(g,w,E,x,p,f),recordGraphSize(g,p,f),Promise.resolve("Displayed Views by Traffic Source")}function displayVideoBasicStats(e,t,o){const n=e.result.rows;for(let e=0;e<n.length;e++){const r=n[e],a=r[0],s=t[a];let i=document.getElementById(s+"-views");i.innerHTML=numberWithCommas(r[1]);let l=document.getElementById(s+"-subs-net");l.innerHTML=numberWithCommas(r[7]-r[8]);let c=document.getElementById(s+"-like-ratio"),d=document.getElementById(s+"-likes"),m=document.getElementById(s+"-like-bar");const h=decimalToPercent(r[3]/(r[3]+r[4]));c.innerHTML=h+"%",d.innerHTML=numberWithCommas(r[3])+" Likes",m.style.width=h+"%",m.setAttribute("aria-valuenow",h);let u=document.getElementById(s+"-dislikes");u.innerHTML=r[4]+" Dislikes";let g=document.getElementById(s+"-comments");g.innerHTML=numberWithCommas(r[2]);let p=document.getElementById(s+"-avg-view-duration");const f=r[6];p.innerHTML=secondsToDuration(f);const b=document.getElementById(s+"-duration-seconds").innerHTML,y=decimalToPercent(f/b);let v=document.getElementById(s+"-avg-view-percentage");v.innerHTML=" ("+y+"%)";let w=document.getElementById(s+"-minutes-watched");w.innerHTML=numberWithCommas(r[5]),null!=o&&(o[a].views=r[1],o[a].subscribersGained=r[7]-r[8],o[a].avgViewDuration=r[6],o[a].minutesWatched=r[5],o[a].comments=r[2],o[a].likes=r[3],o[a].dislikes=r[4])}return null==o?null:o}function displayVideoDailyViews(e,t){if(e){let w=e.result.rows;for(var o=[],n=[],r=0;r<w.length;r++)o.push(w[r][0]),n.push(w[r][1]);for(var a=t+"-views-graph",s=.228,i=.4681,l=s*document.documentElement.clientHeight,c=i*document.documentElement.clientWidth,d=Math.floor(.0104*document.documentElement.clientWidth),m={automargin:!0,fixedrange:!0,tickangle:-60,tickformat:"%-m/%d",type:"date"},h={automargin:!0,fixedrange:!0,showline:!0,showticklabels:!0,title:"Views"},u={xaxis:m,yaxis:h},g=[{x:o,y:n,fill:"tozeroy",type:"scatter",marker:{color:"rgb(255,0,0)"}}],p={height:l,width:c,font:{size:d},margin:{b:0,t:0},xaxis:m,yaxis:h},f={displayModeBar:!1,responsive:!0},b=JSON.parse(localStorage.getItem("settings")),y="",v=0;v<b.dashboards.length&&""==y;)b.dashboards[v].name==t&&(y=b.dashboards[v].theme),v++;"dark"==y&&(p.plot_bgcolor="#222",p.paper_bgcolor="#222",p.font.color="#fff",m.linecolor="#fff",h.linecolor="#fff",p.xaxis=m,p.yaxis=h,u={xaxis:m,yaxis:h}),Plotly.newPlot(a,g,p,f),recordGraphData(a,g,p,f,s,i,u),recordGraphSize(a,s,i,u)}}function displayVideoSearchTerms(e,t){if(e){let y=e.result.rows,v=[],w=[],E=Math.min(4,y.length-1);for(var o=E;o>=0;o--)v.push(y[o][1]),w.push(y[o][0]);var n=v.map(String);for(o=0;o<n.length;o++)n[o]=numberWithCommas(n[o]);for(var r=t+"-search-terms",a=.228,s=.4681,i=a*document.documentElement.clientHeight,l=s*document.documentElement.clientWidth,c=Math.floor(.0125*document.documentElement.clientWidth),d={showline:!0,showticklabels:!0,tickmode:"linear",automargin:!0},m={yaxis:d},h=[{x:v,y:w,type:"bar",orientation:"h",text:n,textangle:0,textposition:"auto",marker:{color:"rgb(255,0,0)"}}],u={height:i,width:l,font:{size:c},autosize:!1,margin:{b:0,r:0,t:0},xaxis:{visible:!1},yaxis:d},g={staticPlot:!0,responsive:!0},p=JSON.parse(localStorage.getItem("settings")),f="",b=0;b<p.dashboards.length&&""==f;)p.dashboards[b].name==t&&(f=p.dashboards[b].theme),b++;"dark"==f&&(u.plot_bgcolor="#222",u.paper_bgcolor="#222",u.font.color="#fff",d.linecolor="#fff",u.yaxis=d,m={yaxis:d}),Plotly.newPlot(r,h,u,g),recordGraphData(r,h,u,g,a,s,m),recordGraphSize(r,a,s,m)}}function parseCardPerformance(e,t){if(e){let o=[t,0,0,0,0];try{let n=e.result.rows[0],r=parseInt(n[0]),a=parseFloat(n[1]).toFixed(4),s=parseInt(n[2]),i=parseFloat(n[3]).toFixed(4);o[1]=r,o[2]=a,o[3]=s,o[4]=i}catch(e){const o=`No card data exists for month: "${t}" - `;console.log(o),recordError(e,o)}finally{return o}}}