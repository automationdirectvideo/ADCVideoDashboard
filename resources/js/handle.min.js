function displayChannelDemographics(e){const t=e.result.rows;let o=0,n=0,r=0,i=0;for(var a=0;a<t.length;a++){const e=parseFloat(t[a][2]);"female"==t[a][1]?(n+=e,e>i&&(i=e)):(o+=e,e>r&&(r=e))}for(a=0;a<t.length;a++){const e=t[a][0].substr(3),o=t[a][2];let n=document.getElementById(t[a][1]+"-"+e);n.innerHTML=`<span>${o}</span>%`,"female"==t[a][1]?n.style.opacity=(parseFloat(o)/i+1.5)/2.5:n.style.opacity=(parseFloat(o)/r+1.5)/2.5}if(o=Math.round(10*o)/10,n=Math.round(10*n)/10,o+n!=100){const e=100-(o+n);n+=e,n=Math.round(10*n)/10}document.getElementById("male-title").innerHTML=`\n    <i class="fas fa-male" style="font-size:3rem"></i>\n    <br>\n    <span style="font-size:2rem">${o}</span>\n    %\n  `,document.getElementById("female-title").innerHTML=`\n    <i class="fas fa-female" style="font-size:3rem"></i>\n    <br>\n    <span style="font-size:2rem">${n}</span>\n    %\n  `;const s=.0875,l=.05,c=s*document.documentElement.clientHeight,d=l*document.documentElement.clientWidth,m=[o,n],u=["Male","Female"],h=[{values:m,labels:u,textinfo:"none",hoverinfo:"none",marker:{colors:["rgb(84, 157, 209)","rgb(146, 111, 209)"]},type:"pie"}];let g={height:c,weight:d,showlegend:!1,margin:{l:0,r:0,t:0,b:0,pad:4}};const p={staticPlot:!0};if(gapi.auth2.getAuthInstance().isSignedIn.get()){const e=getCurrentDashboardTheme("platform");"dark"==e&&(g.plot_bgcolor="#222",g.paper_bgcolor="#222")}const y=getDashboardGraphIds("platform"),f=y.demographics;var b=document.getElementById(f);b.style.height=d+"px",b.style.width=d+"px";try{createGraph(f,h,g,p,s,l)}catch(e){return recordError(e,"Unable to display channel demographics graph"),Promise.resolve("Error Displaying Channel Demographics")}if(gapi.auth2.getAuthInstance().isSignedIn.get()){const e={values:[[JSON.stringify(t)]]};return updateSheetData("Stats","Channel Demographics",e).then(e=>"Displayed Channel Demographics")}return Promise.resolve("Displayed Channel Demographics")}function displayChannelSearchTerms(e){const t=e.result.rows;let o=[],n=[];const r=Math.min(9,t.length+-1);for(var i=r;i>=0;i--)o.push(t[i][1]),n.push(t[i][0]);var a=o.map(String);for(i=0;i<a.length;i++)a[i]=numberWithCommas(a[i]);const s=.2287,l=.4681,c=s*document.documentElement.clientHeight,d=l*document.documentElement.clientWidth,m=Math.floor(.0125*document.documentElement.clientWidth);let u={showline:!0,showticklabels:!0,tickmode:"linear",automargin:!0},h={yaxis:u};const g=[{x:o,y:n,type:"bar",orientation:"h",text:a,textposition:"auto",marker:{color:"rgb(255,0,0)"}}];let p={height:c,width:d,font:{size:m},margin:{b:10,r:0,t:10},xaxis:{visible:!1,automargin:!0},yaxis:u};const y={staticPlot:!0,responsive:!0},f=getCurrentDashboardTheme("platform");"dark"==f&&(p.plot_bgcolor="#222",p.paper_bgcolor="#222",p.font.color="#fff",u.linecolor="#fff",p.yaxis=u,h={yaxis:u});const b=getDashboardGraphIds("platform"),E=b.searchTerms;try{createGraph(E,g,p,y,s,l,h)}catch(e){return displayGraphError(E,e),Promise.resolve("Error Displaying Channel Search Terms")}return Promise.resolve("Displayed Channel Search Terms")}function displayWatchTimeBySubscribedStatus(e){const t=e.result.rows,o={UNSUBSCRIBED:"Not Subscribed",SUBSCRIBED:"Subscribed"};for(var n=0,r=[],i=[],a=0;a<t.length;a++)n+=t[a][1],r.push(t[a][1]),i.push(o[t[a][0]]);var s=[];for(a=0;a<r.length;a++)s[a]=decimalToPercent(r[a]/n)+"%";r[0]>r[1]&&(r.reverse(),i.reverse(),s.reverse());const l=.1039,c=.4681,d=l*document.documentElement.clientHeight,m=c*document.documentElement.clientWidth,u=Math.floor(.0125*document.documentElement.clientWidth);let h={showline:!0,showticklabels:!0,tickmode:"linear",automargin:!0},g={yaxis:h};const p=[{x:r,y:i,type:"bar",orientation:"h",text:s,textposition:"auto",marker:{color:"rgb(255,0,0)"}}];let y={height:d,width:m,font:{size:u},margin:{r:0,t:10,b:10},xaxis:{visible:!1,automargin:!0},yaxis:h};const f={staticPlot:!0,responsive:!0},b=getCurrentDashboardTheme("platform");"dark"==b&&(y.plot_bgcolor="#222",y.paper_bgcolor="#222",y.font.color="#fff",h.linecolor="#fff",y.yaxis=h,g={yaxis:h});const E=getDashboardGraphIds("platform"),v=E.watchTime;try{createGraph(v,p,y,f,l,c,g)}catch(e){return displayGraphError(v,e),Promise.resolve("Error Displaying Watch Time By Subscribed Status")}return Promise.resolve("Displayed Watch Time By Subscribed Status")}function displayViewsByDeviceType(e){var t=e.result.rows;const o=t[1];t[1]=t[3],t[3]=o;const n={DESKTOP:"Desktop",MOBILE:"Mobile",TABLET:"Tablet",TV:"TV",GAME_CONSOLE:"Game<br>Console"};for(var r=[],i=[],a=0;a<t.length;a++)r.push(t[a][1]),i.push(n[t[a][0]]);const s=.3742,l=.3065,c=s*document.documentElement.clientHeight,d=l*document.documentElement.clientWidth,m=Math.floor(.0125*document.documentElement.clientWidth),u=[{values:r,labels:i,type:"pie",sort:!1,textinfo:"label+percent",textposition:["inside","outside","outside","inside","outside"],rotation:-120,direction:"clockwise"}];let h={height:c,width:d,font:{size:m},automargin:!0,autosize:!0,showlegend:!1,margin:{l:0,r:0,t:0,b:20,pad:4}};const g={staticPlot:!0,responsive:!0},p=getCurrentDashboardTheme("platform");"dark"==p&&(h.plot_bgcolor="#222",h.paper_bgcolor="#222",h.font.color="#fff");const y=getDashboardGraphIds("platform"),f=y.deviceType;try{createGraph(f,u,h,g,s,l)}catch(e){return displayGraphError(f,e),Promise.resolve("Error Displaying Views By Device Type")}return Promise.resolve("Displayed Views By Device Type")}function displayViewsByState(e){const t=e.result.rows;for(var o=[],n=[],r=[],i=0;i<t.length;i++)o.push(t[i][0].substr(3)),n.push(t[i][1]),r.push(numberWithCommas(t[i][1])+" views");const a=.3742,s=.4681,l=a*document.documentElement.clientHeight,c=s*document.documentElement.clientWidth,d=Math.floor(.0093*document.documentElement.clientWidth);let m=[{type:"choropleth",locationmode:"USA-states",locations:o,z:n,text:r,hovertemplate:"%{location}<br>%{text}",name:"Views By State",autocolorscale:!0,colorbar:{tickfont:{size:d}}}],u={height:l,width:c,geo:{scope:"usa",countrycolor:"rgb(255, 255, 255)",showland:!0,landcolor:"rgb(217, 217, 217)",showlakes:!0,lakecolor:"rgb(255, 255, 255)",subunitcolor:"rgb(255, 255, 255)"},margin:{l:0,r:0,t:0,b:10,pad:4}};const h={scrollZoom:!1,displayModeBar:!1,responsive:!0},g=getCurrentDashboardTheme("platform");"dark"==g&&(u.plot_bgcolor="#222",u.paper_bgcolor="#222",m[0].colorbar={tickfont:{color:"#fff"}},u.geo.bgcolor="#222",u.geo.showlakes=!1);const p=getDashboardGraphIds("platform"),y=p.states;try{createGraph(y,m,u,h,a,s)}catch(e){return displayGraphError(y,e),Promise.resolve("Error Displaying Views By State")}return Promise.resolve("Displayed Views By State")}function displayViewsByTrafficSource(e){const t=e.result.rows;var o=0,n=0,r=0,i=0,a=0;const s=["ADVERTISING","PROMOTED"],l=["EXT_URL","NO_LINK_EMBEDDED","NO_LINK_OTHER"],c=["YT_SEARCH"],d=["RELATED_VIDEO"];for(var m=0;m<t.length;m++)s.includes(t[m][0])?o+=t[m][1]:l.includes(t[m][0])?n+=t[m][1]:c.includes(t[m][0])?r+=t[m][1]:d.includes(t[m][0])?i+=t[m][1]:a+=t[m][1];const u=[o,n,r,i,a],h=["Advertising","External","YouTube<br>Search","Related<br>Video","Other"],g=.3742,p=.3065,y=g*document.documentElement.clientHeight,f=p*document.documentElement.clientWidth,b=Math.floor(.0125*document.documentElement.clientWidth),E=[{values:u,labels:h,type:"pie",textinfo:"label+percent",textposition:"inside",rotation:90}];let v={height:y,width:f,font:{size:b},automargin:!0,autosize:!0,showlegend:!1,margin:{l:0,r:0,t:0,b:10,pad:4}};const T={staticPlot:!0,responsive:!0},x=getCurrentDashboardTheme("platform");"dark"==x&&(v.plot_bgcolor="#222",v.paper_bgcolor="#222",v.font.color="#fff");const w=getDashboardGraphIds("platform"),I=w.trafficSource;try{createGraph(I,E,v,T,g,p)}catch(e){return displayGraphError(I,e),Promise.resolve("Error Displaying Views By Traffic Source")}return Promise.resolve("Displayed Views By Traffic Source")}function displayVideoBasicStats(e,t,o){const n=e.result.rows;for(let e=0;e<n.length;e++){const r=n[e],i=r[0],a=t[i];let s=document.getElementById(a+"-views");s.innerHTML=numberWithCommas(r[1]);let l=document.getElementById(a+"-subs-net");l.innerHTML=numberWithCommas(r[7]-r[8]);let c=document.getElementById(a+"-like-ratio"),d=document.getElementById(a+"-likes"),m=document.getElementById(a+"-like-bar");const u=decimalToPercent(r[3]/(r[3]+r[4]));c.innerHTML=u+"%",d.innerHTML=numberWithCommas(r[3])+" Likes",m.style.width=u+"%",m.setAttribute("aria-valuenow",u);let h=document.getElementById(a+"-dislikes");h.innerHTML=r[4]+" Dislikes";let g=document.getElementById(a+"-comments");g.innerHTML=numberWithCommas(r[2]);let p=document.getElementById(a+"-avg-view-duration");const y=r[6];p.innerHTML=secondsToDuration(y);const f=document.getElementById(a+"-duration-seconds").innerHTML,b=decimalToPercent(y/f);let E=document.getElementById(a+"-avg-view-percentage");E.innerHTML=" ("+b+"%)";let v=document.getElementById(a+"-minutes-watched");v.innerHTML=numberWithCommas(r[5]),null!=o&&(o[i].views=r[1],o[i].subscribersGained=r[7]-r[8],o[i].avgViewDuration=r[6],o[i].minutesWatched=r[5],o[i].comments=r[2],o[i].likes=r[3],o[i].dislikes=r[4])}return null==o?null:o}function displayVideoDailyViews(e,t){if(e){let y=e.result.rows;for(var o=[],n=[],r=0;r<y.length;r++)o.push(y[r][0]),n.push(y[r][1]);var i=.228,a=.4681,s=i*document.documentElement.clientHeight,l=a*document.documentElement.clientWidth,c=Math.floor(.0104*document.documentElement.clientWidth),d={automargin:!0,fixedrange:!0,tickangle:-60,tickformat:"%-m/%d",type:"date"},m={automargin:!0,fixedrange:!0,showline:!0,showticklabels:!0,title:"Views"},u={xaxis:d,yaxis:m},h=[{x:o,y:n,fill:"tozeroy",type:"scatter",marker:{color:"rgb(255,0,0)"}}],g={height:s,width:l,font:{size:c},margin:{b:0,t:0},xaxis:d,yaxis:m},p={displayModeBar:!1,responsive:!0};const f=getCurrentDashboardTheme(t);"dark"==f&&(g.plot_bgcolor="#222",g.paper_bgcolor="#222",g.font.color="#fff",d.linecolor="#fff",m.linecolor="#fff",g.xaxis=d,g.yaxis=m,u={xaxis:d,yaxis:m});const b=getDashboardGraphIds(t),E=b.dailyViews;try{createGraph(E,h,g,p,i,a,u)}catch(e){throw displayGraphError(E),e}}}function displayVideoSearchTerms(e,t){if(e){let g=e.result.rows,p=[],y=[],f=Math.min(4,g.length-1);for(var o=f;o>=0;o--)p.push(g[o][1]),y.push(g[o][0]);var n=p.map(String);for(o=0;o<n.length;o++)n[o]=numberWithCommas(n[o]);var r=.228,i=.4681,a=r*document.documentElement.clientHeight,s=i*document.documentElement.clientWidth,l=Math.floor(.0125*document.documentElement.clientWidth),c={showline:!0,showticklabels:!0,tickmode:"linear",automargin:!0},d={yaxis:c},m=[{x:p,y:y,type:"bar",orientation:"h",text:n,textangle:0,textposition:"auto",marker:{color:"rgb(255,0,0)"}}],u={height:a,width:s,font:{size:l},autosize:!1,margin:{b:0,r:0,t:0},xaxis:{visible:!1},yaxis:c},h={staticPlot:!0,responsive:!0};const b=getCurrentDashboardTheme(t);"dark"==b&&(u.plot_bgcolor="#222",u.paper_bgcolor="#222",u.font.color="#fff",c.linecolor="#fff",u.yaxis=c,d={yaxis:c});const E=getDashboardGraphIds(t),v=E.searchTerms;try{createGraph(v,m,u,h,r,i,d)}catch(e){throw displayGraphError(v),e}}}function parseCardPerformance(e,t){if(e){let o=[t,0,0,0,0];try{let n=e.result.rows[0],r=parseInt(n[0]),i=parseFloat(n[1]).toFixed(4),a=parseInt(n[2]),s=parseFloat(n[3]).toFixed(4);o[1]=r,o[2]=i,o[3]=a,o[4]=s}catch(e){const o=`No card data exists for month: "${t}" - `;console.log(o),recordError(e,o)}finally{return o}}}function displayVideographerStats(e=lsGet("videographers")){const t=["Shane C","Rick F","Tim W"];t.forEach(t=>{const o=t.replace(" ","*");for(const n in e[t])if(e[t].hasOwnProperty(n)){const r=e[t][n],i=`vstats-${o}-`,a=`${i}${n}-`,s=document.getElementById(`${a}views-total`),l=document.getElementById(`${a}views-avg`),c=document.getElementById(`${a}subs-total`),d=document.getElementById(`${a}subs-avg`),m=document.getElementById(`${a}comments-total`),u=document.getElementById(`${a}comments-avg`),h=document.getElementById(`${a}likes-total`),g=document.getElementById(`${a}likes-avg`),p=document.getElementById(`${a}dislikes-total`),y=document.getElementById(`${a}dislikes-avg`),f=document.getElementById(`${a}like-ratio-total`),b=document.getElementById(`${a}like-ratio-avg`),E=document.getElementById(`${a}like-bar-total`),v=document.getElementById(`${a}like-bar-avg`),T=document.getElementById(`${a}duration-total`),x=document.getElementById(`${a}duration-avg`);s.innerHTML=numberWithCommas(r.totalViews),l.innerHTML=numberWithCommas(roundTo(r.avgViews,0)),c.innerHTML=numberWithCommas(r.totalSubsGained),d.innerHTML=roundTo(r.avgSubsGained,2),m.innerHTML=numberWithCommas(r.totalComments),u.innerHTML=roundTo(r.avgComments,1),h.innerHTML=numberWithCommas(r.totalLikes),g.innerHTML=roundTo(r.avgLikes,2),p.innerHTML=numberWithCommas(r.totalDislikes),y.innerHTML=roundTo(r.avgDislikes,2);const w=decimalToPercent(r.cumLikeRatio),I=decimalToPercent(r.avgLikeRatio);f.innerHTML=w+"%",b.innerHTML=I+"%",E.style.width=w+"%",v.style.width=I+"%",T.innerHTML=secondsToDurationLabeled(r.totalDuration.toFixed(0)),x.innerHTML=secondsToDurationLabeled(r.avgDuration.toFixed(0));const B=`vstats-overall-${o}-`,D=`${B}${n}-`,M=document.getElementById(`${D}videos-total`),k=document.getElementById(`${D}videos-last`),L=document.getElementById(`${D}avp-total`),C=document.getElementById(`${D}avp-last`),S=document.getElementById(`${D}watched-total`),W=document.getElementById(`${D}watched-last`);M.innerHTML=r.numVideos,k.innerHTML=numberWithCommas(r.numVideosLastXDays),L.innerHTML=roundTo(r.avgViewPercentage,1)+"%",C.innerHTML=roundTo(r.avgViewPercentageLastXDays,1)+"%",S.innerHTML=numberWithCommas(r.minWatched),W.innerHTML=numberWithCommas(r.minWatchedLastXDays);let H=[{dashboardId:a,preCatId:i,leftBtn:{id:null,target:null},rightBtn:{id:`${a}more`,target:`${D}grid`}},{dashboardId:D,preCatId:B,leftBtn:{id:null,target:null},rightBtn:{id:`${D}more`,target:`${a}grid`}}];H.forEach(o=>{for(const r in e[t])if(e[t].hasOwnProperty(r)){const e=document.getElementById(`${o.dashboardId}grid`),t=document.getElementById(`${o.dashboardId}btn-${r}`);if(n==r)t.disabled="disabled";else{const n=document.getElementById(`${o.preCatId}${r}-grid`);t.onclick=function(){e.classList.remove("active-grid"),n.classList.add("active-grid")}}const i=document.getElementById(o.rightBtn.id),a=document.getElementById(o.rightBtn.target);i.onclick=function(){e.classList.remove("active-grid"),a.classList.add("active-grid")}}})}})}function displayContestComparisonGraph(e){const t=lsGet("allVideoStats"),o=.8583,n=.9528,r=o*document.documentElement.clientHeight,i=n*document.documentElement.clientWidth,a=Math.floor(.0208*document.documentElement.clientWidth),s=Math.floor(.0128*document.documentElement.clientWidth),l=Math.floor(.0156*document.documentElement.clientWidth),c=Math.floor(.0156*document.documentElement.clientWidth),d=Math.floor(.0128*document.documentElement.clientWidth),m=Math.floor(.03*document.documentElement.clientWidth),u=Math.floor(.0104*document.documentElement.clientWidth);let h=[],g=[],p=[];for(const o in e)if(e.hasOwnProperty(o)){const n=e[o];h.push(n.shortTitle);const r=t.findIndex(e=>o==e.videoId);g.push(t[r].views),p.push(t[r].subscribersGained)}h=h.map(e=>e.replace(/(?![^\n]{1,20}$)([^\n]{1,20})\s/g,"$1<br>"));const y={x:h,y:g,name:"Views",offsetgroup:1,textfont:{size:c},textposition:"auto",texttemplate:"%{y:,}",type:"bar",yaxis:"y"};let f=JSON.parse(JSON.stringify(y));f.y=p,f.name="Subscribers<br>Gained",f.offsetgroup=2,f.texttemplate="%{y:,}",f.yaxis="y2";const b=[y,f],E={height:r,width:i,barmode:"group",hovermode:!1,legend:{bgcolor:"#eeeeee",font:{size:s},x:1.1,xanchor:"left",y:.5},margin:{b:u,t:m},paper_bgcolor:"rgba(0,0,0,0)",plot_bgcolor:"rgba(0,0,0,0)",title:{font:{size:a},text:"Contest Video Views and Subscribers Gained"},xaxis:{automargin:!0,fixedrange:!0,tickangle:0,tickfont:{size:d},title:{font:{size:l},text:"Contest Video"}},yaxis:{automargin:!0,fixedrange:!0,tickfont:{size:d},title:{font:{size:l},text:"Video Views"}},yaxis2:{automargin:!0,fixedrange:!0,showgrid:!1,overlaying:"y",side:"right",zeroline:!1,tickfont:{size:d},title:{font:{size:l},text:"Subscribers Gained"}}},v={scrollZoom:!1,displayModeBar:!1,staticPlot:!0,responsive:!0},T=getDashboardGraphIds("contestGraphs"),x=T.comparison;try{createGraph(x,b,E,v,o,n)}catch(e){displayGraphError(x,e)}}