function resetSettings(){localStorage.setItem("settings",JSON.stringify(defaultSettings))}function saveNewSettings(){localStorage.setItem("settings",JSON.stringify(currentSettings)),localStorage.removeItem("graphSizes")}function recordCycleSpeed(e){Number.isInteger(e)?(e<0&&(e=0),currentSettings.cycleSpeed=e):console.error("Type Error: ","Parameter speed is not an integer")}function recordScrollSpeeds(){for(var e=currentSettings.dashboards,t=0;t<e.length;t++){var n=e[t];null!=n.scrollSpeed&&(scrollInput=document.getElementById(n.name+"-scroll-input"),currentSettings.dashboards[t].scrollSpeed=scrollInput.value)}}function moveDashboards(e,t){for(;e.children.length>0;){var n=e.children[0];n.remove(),t.appendChild(n)}}function setAllDashboardThemes(e){if(supportedThemes.includes(e))for(var t=currentSettings.dashboards,n=0;n<t.length;n++){var d=document.getElementById(t[n].name+"-badge");d.innerHTML=capitalizeFirstLetter(e),d.classList="badge badge-pill badge-theme badge-"+e;for(var a=0;a<supportedThemes.length;a++){var s=document.getElementById(t[n].name+"-"+supportedThemes[a]+"-btn");supportedThemes[a]==e?s.disabled=!0:s.disabled=!1}}else console.error("Type Error: ","Parameter theme is not a supported value")}function recordDashboardOrderandThemes(){for(var e=enabledSortable.toArray(),t=0,n=0;n<currentSettings.dashboards.length;n++){var d=currentSettings.dashboards[n];d.index=e.indexOf(d.name),d.index>=0&&t++;var a=document.getElementById(d.name+"-badge");d.theme=a.innerHTML.toLowerCase()}currentSettings.numEnabled=t}function loadDashboardList(){for(let t=0;t<currentSettings.dashboards.length;t++){let n=currentSettings.dashboards[t],d=document.getElementById("INSERT_ID").cloneNode(!0),a=d.outerHTML;a=a.replace(/INSERT_ID/g,n.name),a=a.replace(/TITLE PLACEHOLDER/,n.title);var e=document.createElement("template");e.innerHTML=a,d=e.content.firstChild,enabledDashboardsList.appendChild(d),null!=n.scrollSpeed&&(document.getElementById(n.name+"-scroll-row").classList.remove("d-none"),document.getElementById(n.name+"-scroll-input").setAttribute("value",n.scrollSpeed))}}function loadSettings(){cycleSpeedInput.value=currentSettings.cycleSpeed;for(var e=new Array(currentSettings.numEnabled),t=new Array,n=0;n<currentSettings.dashboards.length;n++){var d=currentSettings.dashboards[n];d.index>=0?e.splice(d.index,1,d.name):t.push(d.name);var a=document.getElementById(d.name+"-badge");a.innerHTML=capitalizeFirstLetter(d.theme),a.classList.add("badge-"+d.theme)}for(n=0;n<e.length;n++){var s=document.getElementById(e[n]);s.remove(),enabledDashboardsList.appendChild(s)}for(n=0;n<t.length;n++){s=document.getElementById(t[n]);s.remove(),disabledDashboardsList.appendChild(s)}updateDashboardText()}function updateDashboardText(){disabledDashboardsList.children.length>0?document.getElementById("no-disabled-text").classList.add("d-none"):document.getElementById("no-disabled-text").classList.remove("d-none"),enabledDashboardsList.children.length>0?document.getElementById("no-enabled-text").classList.add("d-none"):document.getElementById("no-enabled-text").classList.remove("d-none")}var currentSettings=JSON.parse(localStorage.getItem("settings"));const supportedThemes=["light","dark"],cycleSpeedInput=document.getElementById("cycle-speed-input"),allLightThemeButton=document.getElementById("all-light-btn"),allDarkThemeButton=document.getElementById("all-dark-btn"),enableAllButton=document.getElementById("enable-all-btn"),disableAllButton=document.getElementById("disable-all-btn"),resetButton=document.getElementById("confirm-reset-btn"),saveButton=document.getElementById("save-btn");var disabledDashboardsList=document.getElementById("disabledDashboards"),enabledDashboardsList=document.getElementById("enabledDashboards");allLightThemeButton.addEventListener("click",function(){setAllDashboardThemes("light")}),allDarkThemeButton.addEventListener("click",function(){setAllDashboardThemes("dark")}),enableAllButton.addEventListener("click",function(){moveDashboards(disabledDashboardsList,enabledDashboardsList),updateDashboardText()}),disableAllButton.addEventListener("click",function(){moveDashboards(enabledDashboardsList,disabledDashboardsList),updateDashboardText()}),resetButton.addEventListener("click",function(){resetSettings(),window.location="index.html"}),saveButton.addEventListener("click",function(){recordCycleSpeed(parseInt(cycleSpeedInput.value,10)),recordScrollSpeeds(),recordDashboardOrderandThemes(),saveNewSettings(),window.location="index.html"}),loadDashboardList();for(var i=0;i<currentSettings.dashboards.length;i++)(function(){var e=currentSettings.dashboards[i].name;let t=document.getElementById(e),n=document.getElementById(e+"-enable-btn"),d=document.getElementById(e+"-disable-btn"),a=document.getElementById(e+"-light-btn"),s=document.getElementById(e+"-dark-btn");"light"==currentSettings.dashboards[i].theme?(a.disabled=!0,s.disabled=!1):(s.disabled=!0,a.disabled=!1),-1==currentSettings.dashboards[i].index?(d.disabled=!0,n.disabled=!1):(n.disabled=!0,d.disabled=!1),n.addEventListener("click",function(){n.disabled=!0,d.disabled=!1,t.remove(),enabledDashboardsList.appendChild(t),updateDashboardText()}),d.addEventListener("click",function(){d.disabled=!0,n.disabled=!1,t.remove(),disabledDashboardsList.appendChild(t),updateDashboardText()}),a.addEventListener("click",function(){a.disabled=!0,s.disabled=!1;let t=document.getElementById(e+"-badge");t.innerHTML="Light",t.className="badge badge-pill badge-theme badge-light"}),s.addEventListener("click",function(){s.disabled=!0,a.disabled=!1;let t=document.getElementById(e+"-badge");t.innerHTML="Dark",t.className="badge badge-pill badge-theme badge-dark"})})();console.log("Current Settings: ",currentSettings),loadSettings();var enabledSortable=Sortable.create(enabledDashboards,{animation:150,ghostClass:"grey-background",group:"dashboards",handle:".drag-handle",onAdd:function(e){var t=document.getElementById(e.item.id+"-enable-btn"),n=document.getElementById(e.item.id+"-disable-btn");t.disabled=!0,n.disabled=!1},onChange:function(){updateDashboardText()}}),disabledSortable=Sortable.create(disabledDashboards,{animation:150,ghostClass:"grey-background",group:"dashboards",handle:".drag-handle",onAdd:function(e){var t=document.getElementById(e.item.id+"-enable-btn"),n=document.getElementById(e.item.id+"-disable-btn");t.disabled=!1,n.disabled=!0},onChange:function(){updateDashboardText()}});$(".collapse").on("show.bs.collapse",function(){var e=this.id,t=this.id.substring(0,e.length-4)+"collapse",n=this.id.substring(0,e.length-4)+"expand",d=document.getElementById(t),a=document.getElementById(n);a.classList.add("d-none"),d.classList.remove("d-none")}),$(".collapse").on("hide.bs.collapse",function(){var e=this.id,t=this.id.substring(0,e.length-4)+"collapse",n=this.id.substring(0,e.length-4)+"expand",d=document.getElementById(t),a=document.getElementById(n);d.classList.add("d-none"),a.classList.remove("d-none")});