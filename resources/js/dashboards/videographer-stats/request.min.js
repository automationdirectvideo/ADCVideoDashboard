function requestVideoEngagement(e,t,r){let n=[];for(let o=0;o<e.length;o+=50){const a=e.slice(o,o+50),s=a.join(","),i="video=="+s,c={endDate:r,filters:i,ids:"channel==UCR5c2ZGLZY2FFbxZuSxzzJg",metrics:"estimatedMinutesWatched,averageViewPercentage",startDate:t},g=gapi.client.youtubeAnalytics.reports.query(c).then(e=>({minWatched:e.result.rows[0][0],avgViewPercentage:e.result.rows[0][1]})).catch(e=>{const t="Error in fetching video engagement for video group"+` ${o} - ${o+49}: `;return console.error(t,e),recordError(e,t),t});n.push(g)}return Promise.all(n).then(e=>{const t=e.reduce((e,t)=>e+t.minWatched,0),r=average(e.map(e=>e.avgViewPercentage));return{minWatched:t,avgViewPercentage:r}})}function requestVideographerAvgViews(e,t,r){let n=[],o=[];for(const a in e)if(e.hasOwnProperty(a)){const s=e[a];for(const e in s)if(s.hasOwnProperty(e)){const i=s[e],c=i.videos;o.push({category:e,name:a}),n.push(requestVideoViews(c,t,r))}}return Promise.all(n).then(e=>{let t=lsGet("videographers");for(let r=0;r<e.length;r++){const n=e[r],a=o[r].name,s=o[r].category,i=t[a][s].numVideos;t[a][s].lastXDaysAvgViews=n/i}return lsSet("videographers",t),t}).catch(e=>{const t="Unable to get videographer average views - ";console.error(t,e),recordError(e,t)})}function requestVideographerEngagementStats(e,t,r){let n=!0;null!=t&&"2010-07-01"!=t||(t="2010-07-01",r=getTodaysDate(),n=!1);let o=[],a=[];for(const n in e)if(e.hasOwnProperty(n)){const s=e[n];for(const e in s)if(s.hasOwnProperty(e)){const i=s[e],c=i.videos;a.push({category:e,name:n}),o.push(requestVideoEngagement(c,t,r))}}return Promise.all(o).then(e=>{let t=lsGet("videographers");for(let r=0;r<e.length;r++){const o=e[r],s=a[r].name,i=a[r].category;let c=t[s][i];const g=o.minWatched,l=o.avgViewPercentage;n?(c.minWatchedLastXDays=g,c.avgViewPercentageLastXDays=l):(c.minWatched=g,c.avgViewPercentage=l)}return lsSet("videographers",t),t})}function getVideographerViewsByMonthSince(e,t){t=t||new Date("2010-07-1"),console.log(t);let r=[];isUpdating=!0;let n=3e3,o=n;const a=new Date;for(;a-t>0;){const a=getYouTubeDateFormat(t);o+=n,setTimeout(()=>{r.push(requestVideographerViewsForMonth(e,a))},o),t=new Date(t.getFullYear(),t.getMonth()+1,1)}return Promise.all(r).then(e=>{isUpdating=!1;let t=lsGet("videographers");return t}).catch(e=>{isUpdating=!1;const t="Error occurred getting Card Performance By Month: ";console.error(t,e),recordError(e,t)})}