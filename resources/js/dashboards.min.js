function createGraph(e,t,n,a,s,o,r,i){try{Plotly.newPlot(e,t,n,a),null!=r&&1!=r||recordGraphData(e,t,n,a,s,o,i),recordGraphSize(e,s,o,i)}catch(e){throw e}}function recordGraphData(e,t,n,a,s,o,r){let i=document.querySelectorAll(".graph-container").length,u=lsGet("graphData");u&&(r||(r="None"),u[e]={data:t,layout:n,config:a,graphHeight:s,graphWidth:o,automargin:r},Object.keys(u).length==i?(lsSet("graphData",u),gapi.auth2.getAuthInstance().isSignedIn.get()&&saveGraphDataToSheets()):lsSet("graphData",u))}function recordGraphSize(e,t,n,a){lsGet("graphSizes")||lsGet("graphSizes",{});let s=lsGet("graphSizes");s[e]={height:t,width:n},a&&(s[e].automargin=a),lsSet("graphSizes",s)}function resetGraphData(){lsSet("graphData",{}),lsSet("graphSizes",{})}function resizeGraphs(){const e=lsGet("graphSizes"),t=document.documentElement.clientHeight,n=document.documentElement.clientWidth;for(const a in e)if(e.hasOwnProperty(a)){const s=e[a],o=s.height*t,r=s.width*n,i={height:o,width:r};Plotly.relayout(a,i)}}function displayGraphError(e,t){t&&recordError(t,`Unable to display graph "${e}" - `);let n='\n    <div class="h-100 w-100 position-relative">\n      <div class="alert alert-danger graph-error h3" role="alert">\n        <i class="fas fa-exclamation-triangle"></i>\n        Error loading graph\n      </div>\n    </div>\n  ';const a=document.getElementById(e);a.innerHTML=n}function fixGraphMargins(){let e=lsGet("graphSizes");for(var t in e){let n=e[t].automargin;n&&Plotly.relayout(t,n)}}function updateTheme(e){try{if(gapi.auth2.getAuthInstance().isSignedIn.get()){var t=document.getElementsByClassName("carousel-item")[e],n=document.getElementsByTagName("body")[0];"dark"==t.getAttribute("theme")?(n.className="dark","platform"==t.id&&document.getElementsByClassName("demographics-table")[0].classList.add("table-dark")):n.className=""}}catch(e){console.error(e),recordError(e)}}function getDashboardGraphIds(e){if("categoryGraphs"==e)return currentSettings.categoryGraphs;if("videographerGraphs"==e)return currentSettings.videographerGraphs;if("contestGraphs"==e)return currentSettings.contestGraphs;if("contest-video-"==e.substr(0,14)){let t=/[^-]*$/.exec(e)[0],n=currentSettings.contestGraphs,a={};for(const e in n)if(n.hasOwnProperty(e)){const s=n[e];a[e]=s.replace("#",t)}return a}if("top-video-"==e.substr(0,10)){let t=/[^-]*$/.exec(e)[0],n=currentSettings.topVideoGraphs,a={};for(const e in n)if(n.hasOwnProperty(e)){const s=n[e];a[e]=s.replace("#",t)}return a}const t=currentSettings.dashboards;let n=0;for(;n<t.length;){const a=t[n];if(a.name==e)return a.graphIds;n++}return null}function carouselNext(){$(".carousel-container.active > .carousel").carousel("next")}function carouselPrev(){$(".carousel-container.active > .carousel").carousel("prev")}function pauseDashboard(){let e=document.getElementById("pause-text"),t=document.getElementById("play-text");$(".dashboard-carousel").carousel("pause"),e.style.display="initial",t.style.display="none",isPaused=!0}function playDashboard(){let e=document.getElementById("pause-text"),t=document.getElementById("play-text");$(".dashboard-carousel").carousel("cycle"),e.style.display="none",t.style.display="initial",setTimeout(function(){0!=t.offsetHeight&&$("#play-text").fadeOut()},2e3),isPaused=!1}function toggleDashboardPause(){isPaused?playDashboard():pauseDashboard()}function temporarilyToggleDashboardPause(e){e?$(".dashboard-carousel").carousel("pause"):isPaused||$(".dashboard-carousel").carousel("cycle")}function goToCarouselItem(e){$(".carousel-container.active > .carousel").carousel(e)}function hideMenu(){document.body.removeAttribute("menu"),isMenuOpen=!1}function showMenu(){document.body.setAttribute("menu","open"),isMenuOpen=!0}function toggleMenuVisibility(){isMenuOpen?hideMenu():showMenu()}function nextMenuItem(){switchMenuItem(1)}function prevMenuItem(){switchMenuItem(-1)}function switchMenuItem(e){let t=document.getElementById("menu-group"),n=t.children.length,a=document.activeElement,s=parseInt(a.getAttribute("menu-index"));isNaN(s)&&(s=e>0?-1:0);let o=s+e,r=(o%n+n)%n,i=document.querySelector(`.menu-item[menu-index='${r}']`);i.focus()}function selectMenuItem(e){const t=document.querySelector(`.menu-item.item-${e}`);t&&t.focus()}function addDotsToLoadingText(){const e=document.getElementById("loading-text");e.innerHTML.endsWith("...")||(e.innerHTML+="...")}function hideLoadingText(){const e=document.getElementById("loading-text");e.style.display="none"}function showLoadingText(){const e=document.getElementById("loading-text");e.style.display="initial"}function hideUpdatingText(){const e=document.getElementById("updating-text");e.style.display="none"}function showUpdatingText(){const e=document.getElementById("updating-text");e.style.display="initial"}function setLoadingStatus(e){isLoading=e,temporarilyToggleDashboardPause()}function setUpdatingStatus(e){isUpdating=e,temporarilyToggleDashboardPause()}function getCurrentSettings(){lsGet("settings")||lsSet("settings",defaultSettings),window.currentSettings=lsGet("settings");const e=currentSettings.version,t=defaultSettings.version;(null==e||t>e)&&(lsSet("settings",defaultSettings),window.currentSettings=defaultSettings),window.cycleSpeed=1e3*currentSettings.cycleSpeed}function createEventListeners(){document.addEventListener("keyup",function(e){"M"==e.key.toUpperCase()&&gapi.auth2.getAuthInstance().isSignedIn.get()&&toggleMenuVisibility(),isMenuOpen?isNaN(e.key)||32==e.which?"ArrowDown"==e.key?nextMenuItem():"ArrowUp"==e.key&&prevMenuItem():selectMenuItem(e.key):"ArrowLeft"==e.key?carouselPrev():"ArrowRight"==e.key?carouselNext():32==e.which?toggleDashboardPause():"F2"==e.key?signIn():"A"==e.key.toUpperCase()?goToCarouselItem(9):"B"==e.key.toUpperCase()?goToCarouselItem(10):"C"==e.key.toUpperCase()?goToCarouselItem(11):"D"==e.key.toUpperCase()?goToCarouselItem(12):"E"==e.key.toUpperCase()?goToCarouselItem(13):"F"==e.key.toUpperCase()?goToCarouselItem(14):isNaN(e.key)||32==e.which?"U"==e.key.toUpperCase()&&e.altKey&&gapi.auth2.getAuthInstance().isSignedIn.get()?updateDashboards():"L"==e.key.toUpperCase()&&e.altKey&&loadDashboards():e.ctrlKey||e.altKey?goToCarouselItem(parseInt(e.key)+9):goToCarouselItem(parseInt(e.key)-1)}),$(".carousel").on("slide.bs.carousel",function(e){let t=e.target.getAttribute("name"),n=t+"-indicator-",a=document.getElementById(n+e.from),s=document.getElementById(n+e.to);a.classList.remove("active"),s.classList.add("active")}),$(".menu-item").on("mousemove",function(){document.activeElement.blur()}),window.addEventListener("resize",function(){retry(resizeGraphs,5,5e3)},!0)}getCurrentSettings(),initializeCarousels(),createEventListeners();let isLoading=!1,isMenuOpen=!1,isPaused=!1,isUpdating=!1;