function createGraph(e,t,a,n,s,r,o,i){try{Plotly.newPlot(e,t,a,n),null!=o&&1!=o||recordGraphData(e,t,a,n,s,r,i),recordGraphSize(e,s,r,i)}catch(e){throw e}}function recordGraphData(e,t,a,n,s,r,o){let i=document.querySelectorAll(".graph-container").length,l=lsGet("graphData");l&&(o||(o="None"),l[e]={data:t,layout:a,config:n,graphHeight:s,graphWidth:r,automargin:o},Object.keys(l).length==i?(lsSet("graphData",l),gapi.auth2.getAuthInstance().isSignedIn.get()&&saveGraphDataToSheets()):lsSet("graphData",l))}function recordGraphSize(e,t,a,n){lsGet("graphSizes")||lsGet("graphSizes",{});let s=lsGet("graphSizes");s[e]={height:t,width:a},n&&(s[e].automargin=n),lsSet("graphSizes",s)}function resetGraphData(){lsSet("graphData",{}),lsSet("graphSizes",{})}function resizeGraphs(){const e=lsGet("graphSizes"),t=document.documentElement.clientHeight,a=document.documentElement.clientWidth;for(const n in e)if(e.hasOwnProperty(n)){const s=e[n],r=s.height*t,o=s.width*a,i={height:r,width:o};Plotly.relayout(n,i)}}function displayGraphError(e,t){t&&recordError(t,`Unable to display graph "${e}" - `);let a='\n    <div class="h-100 w-100 position-relative">\n      <div class="alert alert-danger graph-error h3" role="alert">\n        <i class="fas fa-exclamation-triangle"></i>\n        Error loading graph\n      </div>\n    </div>\n  ';const n=document.getElementById(e);n.innerHTML=a}function fixGraphMargins(){let e=lsGet("graphSizes");for(var t in e){let a=e[t].automargin;a&&Plotly.relayout(t,a)}}function updateTheme(e){try{if(gapi.auth2.getAuthInstance().isSignedIn.get()){var t=document.getElementsByClassName("carousel-item")[e],a=document.getElementsByTagName("body")[0];"dark"==t.getAttribute("theme")?(a.className="dark","platform"==t.id&&document.getElementsByClassName("demographics-table")[0].classList.add("table-dark")):a.className=""}}catch(e){console.error(e),recordError(e)}}function getDashboardGraphIds(e){if("categoryGraphs"==e)return currentSettings.categoryGraphs;if("videographerGraphs"==e)return currentSettings.videographerGraphs;if("contestGraphs"==e)return currentSettings.contestGraphs;if("contest-video-"==e.substr(0,14)){let t=/[^-]*$/.exec(e)[0],a=currentSettings.contestGraphs,n={};for(const e in a)if(a.hasOwnProperty(e)){const s=a[e];n[e]=s.replace("#",t)}return n}if("top-video-"==e.substr(0,10)){let t=/[^-]*$/.exec(e)[0],a=currentSettings.topVideoGraphs,n={};for(const e in a)if(a.hasOwnProperty(e)){const s=a[e];n[e]=s.replace("#",t)}return n}const t=currentSettings.dashboards;let a=0;for(;a<t.length;){const n=t[a];if(n.name==e)return n.graphIds;a++}return null}function carouselNext(){$(".carousel-container.active > .carousel").carousel("next")}function carouselPrev(){$(".carousel-container.active > .carousel").carousel("prev")}function pauseDashboard(){let e=document.getElementById("pause-text"),t=document.getElementById("play-text");$(".dashboard-carousel").carousel("pause"),e.style.display="initial",t.style.display="none",isPaused=!0}function playDashboard(){let e=document.getElementById("play-text");$(".dashboard-carousel").carousel("cycle"),e.style.display="initial",setTimeout(function(){0!=e.offsetHeight&&$("#play-text").fadeOut()},2e3),isPaused=!1}function toggleDashboardPause(){isPaused?playDashboard():pauseDashboard()}function temporarilyToggleDashboardPause(e){e?$(".dashboard-carousel").carousel("pause"):isPaused||$(".dashboard-carousel").carousel("cycle")}function goToCarouselItem(e){$(".carousel-container.active > .carousel").carousel(e)}function addDotsToLoadingText(){const e=document.getElementById("loading-text");e.innerHTML.endsWith("...")||(e.innerHTML+="...")}function hideLoadingText(){const e=document.getElementById("loading-text");e.style.display="none"}function showLoadingText(){const e=document.getElementById("loading-text");e.style.display="initial"}function hideUpdatingText(){const e=document.getElementById("updating-text");e.style.display="none"}function showUpdatingText(){const e=document.getElementById("updating-text");e.style.display="initial"}function setLoadingStatus(e){isLoading=e,temporarilyToggleDashboardPause()}function setUpdatingStatus(e){isUpdating=e,temporarilyToggleDashboardPause()}function getCurrentSettings(){lsGet("settings")||lsSet("settings",defaultSettings),window.currentSettings=lsGet("settings");const e=currentSettings.version,t=defaultSettings.version;(null==e||t>e)&&(lsSet("settings",defaultSettings),window.currentSettings=defaultSettings),window.cycleSpeed=1e3*currentSettings.cycleSpeed}function createEventListeners(){document.addEventListener("keyup",function(e){"ArrowLeft"==e.key?carouselPrev():"ArrowRight"==e.key?carouselNext():32==e.which?toggleDashboardPause():"F2"==e.key?signIn():"A"==e.key.toUpperCase()?goToCarouselItem(9):"B"==e.key.toUpperCase()?goToCarouselItem(10):"C"==e.key.toUpperCase()?goToCarouselItem(11):"D"==e.key.toUpperCase()?goToCarouselItem(12):"E"==e.key.toUpperCase()?goToCarouselItem(13):"F"==e.key.toUpperCase()?goToCarouselItem(14):isNaN(e.key)||32==e.which?"U"==e.key.toUpperCase()&&e.altKey&&gapi.auth2.getAuthInstance().isSignedIn.get()?updateDashboards():"L"==e.key.toUpperCase()&&e.altKey&&loadDashboards():e.ctrlKey||e.altKey?goToCarouselItem(parseInt(e.key)+9):goToCarouselItem(parseInt(e.key)-1)}),$(".carousel").on("slide.bs.carousel",function(e){let t=e.target.getAttribute("name"),a=t+"-indicator-",n=document.getElementById(a+e.from),s=document.getElementById(a+e.to);n.classList.remove("active"),s.classList.add("active")}),window.addEventListener("resize",function(){retry(resizeGraphs,5,5e3)},!0)}getCurrentSettings(),initializeCarousels(),createEventListeners();let isLoading=!1,isPaused=!1,isUpdating=!1;