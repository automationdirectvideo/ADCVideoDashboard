function createGraph(e,t,a,s,r,o,n,i){try{Plotly.newPlot(e,t,a,s),null!=n&&1!=n||recordGraphData(e,t,a,s,r,o,i),recordGraphSize(e,r,o,i)}catch(e){throw e}}function recordGraphData(e,t,a,s,r,o,n){let i=document.querySelectorAll(".graph-container").length,l=lsGet("graphData");l&&(n||(n="None"),l[e]={data:t,layout:a,config:s,graphHeight:r,graphWidth:o,automargin:n},Object.keys(l).length==i?(lsSet("graphData",l),gapi.auth2.getAuthInstance().isSignedIn.get()&&saveGraphDataToSheets()):lsSet("graphData",l))}function recordGraphSize(e,t,a,s){lsGet("graphSizes")||lsGet("graphSizes",{});let r=lsGet("graphSizes");r[e]={height:t,width:a},s&&(r[e].automargin=s),lsSet("graphSizes",r)}function resetGraphData(){lsSet("graphData",{}),lsSet("graphSizes",{})}function resizeGraphs(){const e=lsGet("graphSizes"),t=document.documentElement.clientHeight,a=document.documentElement.clientWidth;for(const s in e)if(e.hasOwnProperty(s)){const r=e[s],o=r.height*t,n=r.width*a,i={height:o,width:n};Plotly.relayout(s,i)}}function swapNormalCharts(){var e=$(".carousel-container.active >>> .carousel-item.active")[0].id,t=e+"-chart",a=document.getElementById(t);a&&("none"==a.style.display?a.style.display="":a.style.display="none")}function swapDashboardGraphs(){const e=$(".carousel-container.active >>> .carousel-item.active")[0].id;let t,a,s;if("product-categories"==e){const r=getDashboardGraphIds(e);t=document.getElementById(r.graphOne),a=document.getElementById(r.graphTwo),s=document.getElementById(r.graphThree)}else if(0==e.indexOf("videographer")){let r;"videographer-avg-views"==e?r=getDashboardGraphIds("videographerGraphs").avgViews:"videographer-cumulative-videos"==e?r=getDashboardGraphIds("videographerGraphs").cumulativeVideos:"videographer-monthly-videos"==e?r=getDashboardGraphIds("videographerGraphs").monthlyVideos:"videographer-cumulative-views"==e?r=getDashboardGraphIds("videographerGraphs").cumulativeViews:"videographer-monthly-views"==e&&(r=getDashboardGraphIds("videographerGraphs").monthlyViews),t=document.getElementById(r.all),a=document.getElementById(r.organic),s=document.getElementById(r.notOrganic)}if(t&&a&&s)""==t.style.display?(t.style.display="none",a.style.display="",s.style.display="none"):""==a.style.display?(t.style.display="none",a.style.display="none",s.style.display=""):""==s.style.display&&(t.style.display="",a.style.display="none",s.style.display="none");else{const t=$(".carousel-container.active")[0].id;if("category-stats-content"==t)swapNormalCharts();else if(0==e.indexOf("vstat")){const t=document.getElementById(e),a=t.querySelector(".vstats-grid-container.active-grid");let s=a.nextElementSibling;if(null==s){const e=a.parentElement;s=e.firstElementChild}a.classList.remove("active-grid"),s.classList.add("active-grid")}}}function displayGraphError(e,t){t&&recordError(t,`Unable to display graph "${e}" - `);let a='\n    <div class="h-100 w-100 position-relative">\n      <div class="alert alert-danger graph-error h3" role="alert">\n        <i class="fas fa-exclamation-triangle"></i>\n        Error loading graph\n      </div>\n    </div>\n  ';const s=document.getElementById(e);s.innerHTML=a}function fixGraphMargins(){let e=lsGet("graphSizes");for(var t in e){let a=e[t].automargin;a&&Plotly.relayout(t,a)}}function updateTheme(e){try{if(gapi.auth2.getAuthInstance().isSignedIn.get()){var t=document.getElementsByClassName("carousel-item")[e],a=document.getElementsByTagName("body")[0];"dark"==t.getAttribute("theme")?(a.className="dark","platform"==t.id&&document.getElementsByClassName("demographics-table")[0].classList.add("table-dark")):a.className=""}}catch(e){console.error(e),recordError(e)}}function getDashboardGraphIds(e){if("categoryGraphs"==e)return currentSettings.categoryGraphs;if("videographerGraphs"==e)return currentSettings.videographerGraphs;if("contestGraphs"==e)return currentSettings.contestGraphs;if("contest-video-"==e.substr(0,14)){let t=/[^-]*$/.exec(e)[0],a=currentSettings.contestGraphs,s={};for(const e in a)if(a.hasOwnProperty(e)){const r=a[e];s[e]=r.replace("#",t)}return s}if("top-video-"==e.substr(0,10)){let t=/[^-]*$/.exec(e)[0],a=currentSettings.topVideoGraphs,s={};for(const e in a)if(a.hasOwnProperty(e)){const r=a[e];s[e]=r.replace("#",t)}return s}const t=currentSettings.dashboards;let a=0;for(;a<t.length;){const s=t[a];if(s.name==e)return s.graphIds;a++}return null}function carouselNext(){$(".carousel-container.active > .carousel").carousel("next")}function carouselPrev(){$(".carousel-container.active > .carousel").carousel("prev")}function pauseDashboard(){let e=document.getElementById("pause-text"),t=document.getElementById("play-text");$("#dashboard-carousel").carousel("pause"),$("#category-stats-carousel").carousel("pause"),$("#videographer-carousel").carousel("pause"),$("#contest-carousel").carousel("pause"),e.style.display="initial",t.style.display="none",isPaused=!0}function playDashboard(){let e=document.getElementById("pause-text"),t=document.getElementById("play-text");$("#dashboard-carousel").carousel("cycle"),$("#category-stats-carousel").carousel("cycle"),$("#videographer-carousel").carousel("cycle"),$("#contest-carousel").carousel("cycle"),e.style.display="none",t.style.display="initial",setTimeout(function(){0!=t.offsetHeight&&$("#play-text").fadeOut()},2e3),isPaused=!1}function toggleDashboardPause(){isPaused?playDashboard():pauseDashboard()}function temporarilyToggleDashboardPause(e){e?($("#dashboard-carousel").carousel("pause"),$("#category-stats-carousel").carousel("pause"),$("#videographer-carousel").carousel("pause"),$("#contest-carousel").carousel("pause")):isPaused||($("#dashboard-carousel").carousel("cycle"),$("#category-stats-carousel").carousel("cycle"),$("#videographer-carousel").carousel("cycle"),$("#contest-carousel").carousel("cycle"))}function goToCarouselItem(e){$(".carousel-container.active > .carousel").carousel(e)}function addDotsToLoadingText(){const e=document.getElementById("loading-text");e.innerHTML.endsWith("...")||(e.innerHTML+="...")}function hideLoadingText(){const e=document.getElementById("loading-text");e.style.display="none"}function showLoadingText(){const e=document.getElementById("loading-text");e.style.display="initial"}function hideUpdatingText(){const e=document.getElementById("updating-text");e.style.display="none"}function showUpdatingText(){const e=document.getElementById("updating-text");e.style.display="initial"}function setLoadingStatus(e){isLoading=e,temporarilyToggleDashboardPause()}function setUpdatingStatus(e){isUpdating=e,temporarilyToggleDashboardPause()}lsGet("settings")||lsSet("settings",defaultSettings);let currentSettings=lsGet("settings");const settingsVersion=currentSettings.version,defaultVersion=defaultSettings.version;(null==settingsVersion||defaultVersion>settingsVersion)&&(lsSet("settings",defaultSettings),currentSettings=defaultSettings);const cycleSpeed=1e3*currentSettings.cycleSpeed;initializeCarousels(),document.addEventListener("keyup",function(e){"ArrowLeft"==e.key?carouselPrev():"ArrowRight"==e.key?carouselNext():32==e.which?toggleDashboardPause():"F2"==e.key?signIn():"A"==e.key.toUpperCase()?goToCarouselItem(9):"B"==e.key.toUpperCase()?goToCarouselItem(10):"C"==e.key.toUpperCase()?goToCarouselItem(11):"D"==e.key.toUpperCase()?goToCarouselItem(12):"E"==e.key.toUpperCase()?goToCarouselItem(13):"F"==e.key.toUpperCase()?goToCarouselItem(14):"N"==e.key.toUpperCase()?swapNormalCharts():"R"==e.key.toUpperCase()?reloadVideoStrengthDashboard():"V"==e.key.toUpperCase()?swapDashboardGraphs():isNaN(e.key)||32==e.which?"U"==e.key.toUpperCase()&&e.altKey&&gapi.auth2.getAuthInstance().isSignedIn.get()?updateDashboards():"L"==e.key.toUpperCase()&&e.altKey&&loadDashboards():e.ctrlKey||e.altKey?goToCarouselItem(parseInt(e.key)+9):goToCarouselItem(parseInt(e.key)-1)}),$(".carousel").on("slide.bs.carousel",function(e){let t=e.target.getAttribute("name"),a=t+"-indicator-",s=document.getElementById(a+e.from),r=document.getElementById(a+e.to);s.classList.remove("active"),r.classList.add("active")}),window.addEventListener("resize",function(){retry(resizeGraphs,5,5e3)},!0);let isLoading=!1,isPaused=!1,isUpdating=!1;